"use client";
import {
  createAdapterProvider,
  renderQueryString
} from "./chunk-Y4O7FY35.js";
import {
  useLocation,
  useMatches,
  useNavigate
} from "./chunk-Y62XIKQI.js";
import "./chunk-XNHFUK6H.js";
import "./chunk-4E4UAEVW.js";
import {
  require_react
} from "./chunk-6U6HN6A3.js";
import {
  __toESM
} from "./chunk-G3PMV62Z.js";

// node_modules/.pnpm/nuqs@2.7.3_@tanstack+react-router@1.134.15_react-dom@19.2.0_react@19.2.0__react@19.2.0__react@19.2.0/node_modules/nuqs/dist/adapters/tanstack-router.js
var import_react = __toESM(require_react());
function useNuqsTanstackRouterAdapter(watchKeys) {
  const search = useLocation({ select: (state) => Object.fromEntries(Object.entries(state.search).filter(([key]) => watchKeys.includes(key))) });
  const navigate = useNavigate();
  const from = useMatches({ select: (matches) => matches.length > 0 ? matches[matches.length - 1]?.fullPath : void 0 });
  return {
    searchParams: (0, import_react.useMemo)(() => new URLSearchParams(Object.entries(search).flatMap(([key, value]) => {
      if (Array.isArray(value)) return value.map((v) => [key, v]);
      else if (typeof value === "object" && value !== null) return [[key, JSON.stringify(value)]];
      else return [[key, value]];
    })), [search, watchKeys.join(",")]),
    updateUrl: (0, import_react.useCallback)((search$1, options) => {
      (0, import_react.startTransition)(() => {
        navigate({
          to: renderQueryString(search$1) || ".",
          ...from ? { from } : {},
          replace: options.history === "replace",
          resetScroll: options.scroll,
          hash: (prevHash) => prevHash ?? ""
        });
      });
    }, [navigate, from]),
    rateLimitFactor: 1
  };
}
var NuqsAdapter = createAdapterProvider(useNuqsTanstackRouterAdapter);
export {
  NuqsAdapter
};
//# sourceMappingURL=nuqs_adapters_tanstack-router.js.map
