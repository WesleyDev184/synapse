import {
  require_react
} from "./chunk-6U6HN6A3.js";
import {
  __toESM
} from "./chunk-G3PMV62Z.js";

// node_modules/.pnpm/nuqs@2.7.3_@tanstack+react-router@1.134.15_react-dom@19.2.0_react@19.2.0__react@19.2.0__react@19.2.0/node_modules/nuqs/dist/context-DRdo5A2P.js
var import_react = __toESM(require_react(), 1);
var debugEnabled = isDebugEnabled();
function debug(message, ...args) {
  if (!debugEnabled) return;
  const msg = sprintf(message, ...args);
  performance.mark(msg);
  try {
    console.log(message, ...args);
  } catch {
    console.log(msg);
  }
}
function warn(message, ...args) {
  if (!debugEnabled) return;
  console.warn(message, ...args);
}
function sprintf(base, ...args) {
  return base.replace(/%[sfdO]/g, (match) => {
    const arg = args.shift();
    return match === "%O" && arg ? JSON.stringify(arg).replace(/"([^"]+)":/g, "$1:") : String(arg);
  });
}
function isDebugEnabled() {
  try {
    const test = "nuqs-localStorage-test";
    if (typeof localStorage === "undefined") return false;
    localStorage.setItem(test, test);
    const isStorageAvailable = localStorage.getItem(test) === test;
    localStorage.removeItem(test);
    return isStorageAvailable && (localStorage.getItem("debug") || "").includes("nuqs");
  } catch {
    return false;
  }
}
var errors = {
  303: "Multiple adapter contexts detected. This might happen in monorepos.",
  404: "nuqs requires an adapter to work with your framework.",
  409: "Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` (via the %s adapter) was about to load on top.",
  414: "Max safe URL length exceeded. Some browsers may not be able to accept this URL. Consider limiting the amount of state stored in the URL.",
  422: "Invalid options combination: `limitUrlUpdates: debounce` should be used in SSR scenarios, with `shallow: false`",
  429: "URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O",
  500: "Empty search params cache. Search params can't be accessed in Layouts.",
  501: "Search params cache already populated. Have you called `parse` twice?"
};
function error(code) {
  return `[nuqs] ${errors[code]}
  See https://nuqs.dev/NUQS-${code}`;
}
function renderQueryString(search) {
  if (search.size === 0) return "";
  const query = [];
  for (const [key, value] of search.entries()) {
    const safeKey = key.replace(/#/g, "%23").replace(/&/g, "%26").replace(/\+/g, "%2B").replace(/=/g, "%3D").replace(/\?/g, "%3F");
    query.push(`${safeKey}=${encodeQueryValue(value)}`);
  }
  const queryString = "?" + query.join("&");
  warnIfURLIsTooLong(queryString);
  return queryString;
}
function encodeQueryValue(input) {
  return input.replace(/%/g, "%25").replace(/\+/g, "%2B").replace(/ /g, "+").replace(/#/g, "%23").replace(/&/g, "%26").replace(/"/g, "%22").replace(/'/g, "%27").replace(/`/g, "%60").replace(/</g, "%3C").replace(/>/g, "%3E").replace(/[\x00-\x1F]/g, (char) => encodeURIComponent(char));
}
var URL_MAX_LENGTH = 2e3;
function warnIfURLIsTooLong(queryString) {
  if (false) return;
  if (typeof location === "undefined") return;
  const url = new URL(location.href);
  url.search = queryString;
  if (url.href.length > URL_MAX_LENGTH) console.warn(error(414));
}
var context = (0, import_react.createContext)({ useAdapter() {
  throw new Error(error(404));
} });
context.displayName = "NuqsAdapterContext";
if (debugEnabled && typeof window !== "undefined") {
  if (window.__NuqsAdapterContext && window.__NuqsAdapterContext !== context) console.error(error(303));
  window.__NuqsAdapterContext = context;
}
function createAdapterProvider(useAdapter$1) {
  return ({ children, defaultOptions, processUrlSearchParams, ...props }) => (0, import_react.createElement)(context.Provider, {
    ...props,
    value: {
      useAdapter: useAdapter$1,
      defaultOptions,
      processUrlSearchParams
    }
  }, children);
}
function useAdapter(watchKeys) {
  const value = (0, import_react.useContext)(context);
  if (!("useAdapter" in value)) throw new Error(error(404));
  return value.useAdapter(watchKeys);
}
var useAdapterDefaultOptions = () => (0, import_react.useContext)(context).defaultOptions;
var useAdapterProcessUrlSearchParams = () => (0, import_react.useContext)(context).processUrlSearchParams;

export {
  debug,
  warn,
  error,
  renderQueryString,
  createAdapterProvider,
  useAdapter,
  useAdapterDefaultOptions,
  useAdapterProcessUrlSearchParams
};
//# sourceMappingURL=chunk-Y4O7FY35.js.map
